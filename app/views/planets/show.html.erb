<div class="show-banner">
  <% if @planet.photos.first.present? %>
    <%= cl_image_tag(@planet.photos.first.key) %>
  <% else %>
    <%= image_tag "https://images.unsplash.com/photo-1506443432602-ac2fcd6f54e0?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=870&q=80" %>
  <% end %>
</div>
<div class="container mt-3 pt-3 mb-5 planet-show">
  <h1 class="trispace"><%= @planet.name %></h1>
  <span><%= @reviews_avg %><i class="fas fa-star warning ms-1"></i></span>
  <span>(<%= pluralize(@planet.reviews.count, 'review') %>)</span>
  <div>
    <div class="row mt-3">
      <div class="col col-6 pe-5">
        <div class="border-top border-bottom pb-1 pt-3">
          <div class="row">
            <p class="col col-6">
              <span class="gray">Rotation time:</span> <%= @planet.rotation_time %> days
            </p>
            <p class="col col-6">
              <span class="gray">Revolution time:</span> <%= @planet.revolution_time %> days
            </p>
          </div>
          <div class="row">
            <p class="col col-6">
              <span class="gray">Radius:</span>
              <%= number_with_delimiter(@planet.radius, :delimiter => ',') %> km
            </p>
            <p class="col col-6">
              <span class="gray">Average temperature:</span> <%= @planet.avg_temp %>Â°C
            </p>
          </div>
          <p><span class="gray">Location: </span><%= @planet.location %> galaxy</p>
        </div>
        <p class="pe-5 mt-3"><%= @planet.description %></p>
      </div>
      <%= render "reservations/booking_card" %>
    </div>
    <div class="d-flex gap-3 mt-5 pb-3 col col-6 align-items-end border-bottom justify-content-between">
      <h3 class = "trispace" style="margin: 0">Reviews</h3>
      <%= link_to "<i class='fas fa-plus'></i> Add a review".html_safe, new_planet_review_path(@planet), class:"add-review-button" %>
    </div>
    <% if @planet.reviews.first.present? %>
      <ul class="list-group col col-6 black mt-2">
        <% @planet.reviews.each do |review| %>
          <li class="list-group-item">
            <p class="white trispace" style="margin: 0"><strong><%= review.user.name %></strong></p>
            <% (review.rating).times do %>
              <i class="fas fa-star warning"></i>
            <% end %>
            <% (5 - review.rating).times do %>
              <i class="far fa-star"></i>
            <% end %>
            <p style="margin: 0"><%= review.content %></p>
          </li>
        <% end %>
      </ul>
    <% else %>
      <p class="mt-3 gray"><em>No reviews at the moment</em></p>
    <% end %>
  </div>
</div>
